---
page_title: "zstack_instance Resource - terraform-provider-zstack"
subcategory: ""
description: |-
    This resource allows you to manage virtual machine (VM) instances in ZStack. A VM instance represents a virtualized compute resource that can be created, updated, and deleted. You can define the VM's properties, such as its name, image, network configuration, disks, and GPU devices.
---

# zstack_instance (Resource)

This resource allows you to manage virtual machine (VM) instances in ZStack. A VM instance represents a virtualized compute resource that can be created, updated, and deleted. You can define the VM's properties, such as its name, image, network configuration, disks, and GPU devices.

## Example Usage

```terraform
# Copyright (c) ZStack.io, Inc.

data "zstack_images" "images" {
  name = "image name"
}

data "zstack_l3network" "example" {
  name = "network name"
}

resource "zstack_vm" "vm" {
  count          = 2
  name           = "disk-test-${count.index + 1}"
  description    = "test"
  imageuuid      = data.zstack_images.images.images.0.uuid #"${data.zstack_images.images.images[0].uuid}" #"9b26312501614ec0b6dc731e6977dfb2"
  l3networkuuids = data.zstack_l3network.example.l3networks.0.uuid
  rootdisksize   = 202400
  memorysize     = 1147483640
  cupnum         = 1
}

output "zstack_vm" {
  value = zstack_vm.vm
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `image_uuid` (String) The UUID of the image used to create the VM instance.

### Optional

- `cluster_uuid` (String) The UUID of the cluster where the VM instance is deployed.
- `cpu_num` (Number) The number of CPUs allocated to the VM instance.
- `data_disks` (Attributes List) The configuration for additional data disks. (see [below for nested schema](#nestedatt--data_disks))
- `description` (String) A description of the VM instance.
- `gpu_device_specs` (Attributes) The GPU specifications for the VM instance. (see [below for nested schema](#nestedatt--gpu_device_specs))
- `gpu_devices` (Attributes List) A list of GPU devices assigned to the VM instance. (see [below for nested schema](#nestedatt--gpu_devices))
- `host_uuid` (String) The UUID of the host where the VM instance is running.
- `instance_offering_uuid` (String) The UUID of the instance offering used by the VM.
- `l3_network_uuids` (List of String) A list of UUIDs for the L3 networks associated with the VM instance.
- `marketplace` (Boolean) Indicates whether the VM instance is a marketplace instance.
- `memory_size` (Number) The memory size allocated to the VM instance in bytes.
- `name` (String) The name of the VM instance.
- `networks` (Attributes List) The network configurations associated with the VM instance. (see [below for nested schema](#nestedatt--networks))
- `never_stop` (Boolean) Whether the VM instance should never stop automatically.
- `root_disk` (Attributes) The configuration for the root disk of the VM instance. (see [below for nested schema](#nestedatt--root_disk))
- `strategy` (String) The deployment strategy for the VM instance.
- `user_data` (String) User data injected into the VM instance at boot time.
- `zone_uuid` (String) The UUID of the zone where the VM instance is deployed.

### Read-Only

- `uuid` (String) The unique identifier of the VM instance.
- `vm_nics` (Attributes List) The IP address assigned to the VM instance. (see [below for nested schema](#nestedatt--vm_nics))

<a id="nestedatt--data_disks"></a>
### Nested Schema for `data_disks`

Optional:

- `ceph_pool_name` (String) The Ceph pool name for the data disk.
- `offering_uuid` (String) The UUID of the disk offering for the data disk.
- `primary_storage_uuid` (String) The UUID of the primary storage for the data disk.
- `size` (Number) The size of the data disk in bytes.
- `virtio_scsi` (Boolean) Whether the data disk uses Virtio-SCSI.


<a id="nestedatt--gpu_device_specs"></a>
### Nested Schema for `gpu_device_specs`

Optional:

- `number` (Number) The number of GPU devices assigned.
- `type` (String) The type of the GPU device.
- `uuid` (String) The UUID of the GPU device.


<a id="nestedatt--gpu_devices"></a>
### Nested Schema for `gpu_devices`

Optional:

- `type` (String) The type of the GPU device.
- `uuid` (String) The UUID of the GPU device.


<a id="nestedatt--networks"></a>
### Nested Schema for `networks`

Required:

- `uuid` (String) The UUID of the network.


<a id="nestedatt--root_disk"></a>
### Nested Schema for `root_disk`

Optional:

- `ceph_pool_name` (String) The Ceph pool name for the root disk.
- `offering_uuid` (String) The UUID of the disk offering for the root disk.
- `primary_storage_uuid` (String) The UUID of the primary storage for the root disk.
- `size` (Number) The size of the root disk in bytes.
- `virtio_scsi` (Boolean) Whether the root disk uses Virtio-SCSI.


<a id="nestedatt--vm_nics"></a>
### Nested Schema for `vm_nics`

Required:

- `uuid` (String) The UUID of the network.

Read-Only:

- `gateway` (String) The gateway of the network.
- `ip` (String) The IP address assigned to the network.
- `netmask` (String) The netmask of the network.



